/**
 * Twitter bot that tweets out AL East standings via https://erikberg.com/
 *
 * @type {exports}
 */

var Bot = require('./bot')
  , config1 = require('../config1');

var bot = new Bot(config1);

console.log('RTD2: Running.');

//get date string for today's date (e.g. '2011-01-01')
function datestring () {
  var d = new Date(Date.now() - 5*60*60*1000);  //est timezone
  return d.getUTCFullYear()   + '-'
     +  (d.getUTCMonth() + 1) + '-'
     +   d.getDate();
};

setInterval(function() {
  bot.twit.get('followers/ids', function(err, reply) {
    if(err) return handleError(err)
    console.log('\n# followers:' + reply.ids.length.toString());
  });

  // Here we need to get standings data and then tweet it out


  bot.tweet("Still setting things up...", function (err, reply) {
      if(err) return handleError(err);
      console.log('\nTweet: ' + (reply ? reply.text : reply));
  });

}, 40000);

function handleError(err) {
  console.error('response status:', err.statusCode);
  console.error('data:', err.data);
}
